Installation
----

#### Manually install binary dependencies on your platform
install [supercollider](https://supercollider.github.io/download)
install [csound](https://csound.com/download.html)

`git clone https://github.com/marksweiss/omnisound.git`
`cd omnisound`
`./install.sh`
`d=$(pwd)``
`ln -s "$d/ext/python_mingus/mingus/" "$d/mingus"`

RT MIDI Playback in Reaper
----
In Python3 console in `omnisound virtualenv`:
```
import mido
import sys
import time
import random
from mido import Message

portname = 'rtmidi_out'
port = mido.open_output(portname, True)
# A pentatonic scale
notes = [60, 62, 64, 67, 69, 72]
```

In Reaper:
* Add a Track to a Project: `Track -> Insert New Track`
* Add a Midi Item to the Track: `Insert -> New MIDI Item`
* Click on the "in" arrow on the Track and choose `Record: MIDI Overdub/Replace -> Record MIDI Overdub`
* Click on the red circular `Record Armed` button to turn on recording
* Right-click on the `Record Armed` button and choose `Input: MIDI -> rtmidi_out -> Channel 1`
* Go to `Preferences -> Audio -> MIDI Devices` and ensure that under `MIDI Inputs` you see `rtmidi_out` with status `Enabled`
* In the `Mixer` view, on the Mixer control for the Track, click the speaker icon under the red circular Record Armed button to ensure that `Monitoring` is set to `On`

In Python3 console in `omnisound virtualenv`:
NOTE: the below code, especially the use of `sleep()` is not production-quality
```
try:
    with port:
        print('Using {}'.format(port))
        while True:
            note = random.choice(notes)

            on = Message('note_on', note=note, channel=1, time=0, velocity=64)
            print('Sending {}'.format(on))
            port.send(on)
            time.sleep(0.05)

            off = Message('note_off', note=note, channel=1, time=0, velocity=64)
            print('Sending {}'.format(off))
            port.send(off)
            time.sleep(0.05)
except KeyboardInterrupt:
    pass
```